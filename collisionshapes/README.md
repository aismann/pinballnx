This folder contains scripts to convert bitmap images into paths for use with Box2D. 
If you're developing a Box2D game, you might find this useful and are welcome to use it for free ([LICENSE.md](../LICENSE.md)).

### Dependencies
Install [potrace](http://potrace.sourceforge.net/) and [python](https://www.python.org/)

    sudo apt install potrace python

### Usage for creating outline
Supply `myimage.bmp` as bmp image that contains only black or white pixels (no gray) and is a single closed figure (concave and convex both supported).

    cd pinball/collisionshapes
    ./imgtopoints.sh myimage.bmp

The output is a list of pairs of points separated by commas, but not grouped into pairs. The intended use of the output is to create a float array in a C++ file.

    float[38] circle = {250, 293, -35, -18, -13, -37, -14, -37, 18, -38, 19, -38, 36, -13, 36, -14, 37, 16, 37, 15, 15, 36, 15, 37, -11, 34, -12, 35, -21, 14, -22, 14, -25, 6, -25, 5, -35, -17};

A function can then read the float values out of the array in pairs of 2 and use them as x, y coordinates for constructing a chain shape. The points can also be used for creating a [ConvexShape](https://www.sfml-dev.org/documentation/2.5.1/classsf_1_1ConvexShape.php) in SFML for graphics. 

Example input:

![input](./test.bmp)

Example output:

    -45, -16, -43, -15, -42, -15, -19, -16, -18, -16, -28, -54, -27, -54, -14, -46, -14, -46, 0, -80, 0, -80, 24, -50, 24, -50, 48, -51, 49, -51, 48, -36, 48, -36, 39, -11, 39, -11, -45, -60, -46, -60, -53, -39, -52, -39, -26, -44, -26, -44, -15, -44, -16, -44, 0, -13, 0, -13, -18, -37, -18, -37, -63, -112, -63, -113, 12, -30, 13, -31, 29, -15, 30, -16, 28, 12, 29, 12, 16, 41, 16, 42, 54, 90, 54, 90, 14, 45, 14, 45, 13, 43, 13, 43, 27, 27, 27, 27, 37, 28, 36, 28, 40, 54, 41, 55, 7, 0, 8, 0, 13, -107, 12, -108, 10, -85, 10, -85, 11, -55, 11, -55, 17, -55, 17, -56, -7, -69, -8, -70, -32, -110, -32, -110, -18, -70, -18, -70, -27, -70, -26, -70, -9, -30, -8, -30, -36, -89, -36, -89, 0, -16, 0, -16, -19, -50, -19, -50, -10, -26, -10, -26, -589, -6, -588, -5, -5, 5, -5, 5, -5, 191, -5, 192, 6, 270, 7, 270, 11, 55, 11, 55, 10, 45, 11, 45, 10, 70, 10, 70, 5, 146, 6, 145, -26, 80, -27, 80, -19, 31, -19, 32, -50, 39, -50, 40, -43, 15, -43, 16, -26, 5, -25, 5, -31, 23, -31, 23, -63, 50, -64, 50, -101, 97, -102, 97, -39, 21, -38, 21, -59, 34, -58, 35, -38, 30, -38, 30, -43, 20, -44, 20, -60, 0, -60, 0, -51, -24, -50, -23, -82, -92, -82, -91, 0, -9, 0, -9, -68, -68, -69, -69, -114, -125, -113, -125, -108, -49, -108, -48, -74, -79, -75, -78, -31, -61, -31, -61, -19, -95, -20, -96, 0, -72, 0, -71, 11, -45, 10, -45, 10, -75, 9, -75, 11, -95, 11, -95, -11, -85, -12, -85, -31, -160, -31, -160, -14, -70, -14, -70, -7, -60, -7, -60, -230, -6, -230, -6, -92, -2, -93, -1, 0, -200, 0, -200, 3200, 0, 3200, 0, 0, 204, 0, 205, -12, 7, -12, 8, -156, 8, -155, 7, -105, 11, -105, 10, -185, 9, -185, 10, -102, 11, -101, 12, -284, -13, -283, -12, -228, -4, -227, -4, 19, 43, 19, 43, 11, 36, 11, 35, 0, 16, 0, 16, 31, 73, 30, 74, 48, 141, 49, 141, 7, 39, 6, 39, 13, 24, 13, 23, 45, -78, 45, -79, 58, -110, 58, -110, 18, -20, 18, -20, 27, -55, 27, -55, 31, -28, 31, -27, 29, -16, 28, -16, 28, 12, 28, 12, 12, 28, 12, 28, -16, 30, -16, 31, -8, 5, -9, 5, -62, 143, -62, 143, -21, 40, -20, 40, -64, 128, -64, 128, -20, 56, -20, 57, -24, 36, -24, 37, -17, 54, -17, 54, -10, 40, -10, 40, -8, 65, -8, 65, -11, 100, -10, 100, -5, 20, -5, 20, -5, 51, -5, 51, 62, -9, 62, -8, 29, -10, 29, -10, 36, 0, 36, 0, 51, -24, 52, -24, 6, -10, 6, -9, 132, -58, 133, -57, 54, -25, 54, -24, 28, 11, 27, 12, 12, 27, 11, 28, -12, 27, -12, 26, -31, 19, -31, 19, -92, 36, -91, 35, -39, 18, -38, 18, -5, 7, -5, 6, -94, 46, -95, 46, -37, 0, -38, 0, -25, 10, -26, 10, -90, 11, -89, 12, 40, 29, 40, 29, 28, 45, 29, 45, 7, 35, 6, 35, -11, 77, -12, 77, -23, 52, -24, 52, -28, 36, -28, 36, -25, 14, -25, 13, -48, 7, -47, 7, 0, 10, 0, 9, -42, 19, -43, 20, -25, -1, -25, 0, -45, -16,

### Usage for creating triangles
I haven't verified that this works yet, just written it. 

Decomposing the polygon into triangles expressed as groups of 3 pairs of x, y coordinates is useful for creating polygon shapes in Box2D. 

First, build the program that uses the earcut algorithm

    cd pinballnx/collisionshapes/earcut
    g++ -std=c++11 main.cpp -I. -o main
    cd ..

Supply `myimage.bmp` following the same rules as above. 

    ./imgtotris.sh myimage.bmp

Output will be a list of pairs of x, y coordinates where every 3 pairs of coordinates defines a triangle.

Example output:

    Number of points:564
    -25, 0, -45, -16, -43, -15, -42, -15, -19, -16, -18, -16, -18, -16, -28, -54, -27, -54, -63, -112, -63, -113, 12, -30, 41, 55, 7, 0, 8, 0, 17, -56, -7, -69, -8, -70, -26, 80, -27, 80, -19, 31, -19, 31, -19, 32, -50, 39, -50, 40, -43, 15, -43, 16, -43, 16, -26, 5, -25, 5, -64, 50, -101, 97, -102, 97, -102, 97, -39, 21, -38, 21, -68, -68, -69, -69, -114, -125, -114, -125, -113, -125, -108, -49, -108, -48, -74, -79, -75, -78, -20, -96, 0, -72, 0, -71, 0, -71, 11, -45, 10, -45, -12, 7, -12, 8, -156, 8, -156, 8, -155, 7, -105, 11, 7, 39, 6, 39, 13, 24, 13, 24, 13, 23, 45, -78, 31, -28, 31, -27, 29, -16, -20, 56, -20, 57, -24, 36, 51, -24, 52, -24, 6, -10, 6, -9, 132, -58, 133, -57, 12, 27, 11, 28, -12, 27, -5, 6, -94, 46, -95, 46, -38, 0, -25, 10, -26, 10, 6, 35, -11, 77, -12, 77, -25, 13, -48, 7, -47, 7, -25, -1, -25, 0, -43, -15, -114, -125, -108, -49, -108, -48, -20, -96, 0, -71, 10, -45, 31, -28, 29, -16, 28, -16, 12, 27, -12, 27, -12, 26, -38, 0, -26, 10, -90, 11, -25, 13, -47, 7, 0, 10, -25, -1, -43, -15, -42, -15, -25, 14, -25, 13, 0, 10, -25, -1, -42, -15, -18, -16, -23, 52, -24, 52, -28, 36, -28, 36, -25, 14, 0, 10, -18, -16, -27, -54, -14, -46, 24, -50, 48, -51, 49, -51, 49, -51, 48, -36, 39, -11, -52, -39, -26, -44, -16, -44, 28, 12, 29, 12, 16, 41, 16, 42, 54, 90, 14, 45, 27, 27, 37, 28, 36, 28, -32, -110, -18, -70, -26, -70, -8, -30, -36, -89, 0, -16, 11, 55, 10, 45, 11, 45, 11, 45, 10, 70, 5, 146, -43, 20, -44, 20, -60, 0, -60, 0, -51, -24, -50, -23, -82, -91, 0, -9, -68, -68, 11, -95, -11, -85, -12, -85, -230, -6, -92, -2, -93, -1, 0, 204, 0, 205, -12, 7, -228, -4, -227, -4, 19, 43, 19, 43, 11, 36, 11, 35, 0, 16, 31, 73, 30, 74, 45, -78, 45, -79, 58, -110, 58, -110, 18, -20, 27, -55, 27, -55, 31, -28, 28, -16, 28, -16, 28, 12, 12, 28, -62, 143, -21, 40, -20, 40, -17, 54, -10, 40, -8, 65, -10, 100, -5, 20, -5, 51, -5, 51, 62, -9, 62, -8, 12, 27, -12, 26, -31, 19, -31, 19, -92, 36, -91, 35, -12, 77, -23, 52, -28, 36, -18, -16, -14, -46, 0, -80, 24, -50, 49, -51, 39, -11, 12, -30, 13, -31, 29, -15, 16, 41, 16, 42, 14, 45, 14, 45, 13, 43, 27, 27, 27, 27, 36, 28, 40, 54, -9, -30, -8, -30, 0, -16, -43, 20, -60, 0, -50, -23, -82, -91, -68, -68, -114, -125, 11, -95, -12, -85, -31, -160, -283, -12, -228, -4, 19, 43, 19, 43, 11, 35, 0, 16, 13, 24, 45, -78, 58, -110, -17, 54, -8, 65, -11, 100, -42, 19, -43, 20, -25, -1, 28, 12, 16, 41, 14, 45, -38, 30, -43, 20, -50, -23, -82, -92, -82, -91, -114, -125, -31, 19, -91, 35, -39, 18, -31, 19, -39, 18, -38, 18, -31, 19, -38, 18, -5, 7, -43, 16, -25, 5, -31, 23, -31, -61, -19, -95, 10, -45, -156, 8, -105, 11, -185, 9, -283, -12, 19, 43, 30, 74, 13, 24, 58, -110, 28, -16, 12, 28, -16, 30, -8, 5, -9, 5, -62, 143, -64, 128, -20, 56, -24, 36, -17, 54, 62, -8, 29, -10, 51, -24, 51, -24, 6, -10, 133, -57, 40, 29, 28, 45, 7, 35, -26, -70, -9, -30, -19, -50, 11, 45, 5, 146, -26, 80, -19, 31, -50, 39, -43, 16, -19, 31, -43, 16, -31, 23, -31, 23, -63, 50, -64, 50, -75, -78, -31, -61, 10, -45, -185, 10, -102, 11, -101, 12, 13, 24, 28, -16, 12, 28, -64, 128, -20, 56, -17, 54, 51, -24, 133, -57, 54, -25, 54, -25, 54, -24, 28, 11, 28, 11, 12, 27, -31, 19, 40, 29, 7, 35, 6, 35, 6, 35, -12, 77, -28, 36, -52, -39, -16, -44, 0, -13, 0, -13, -18, -37, -63, -112, 29, -15, 30, -16, 28, 12, 14, 45, 27, 27, 40, 54, 17, -56, -8, -70, -32, -110, 11, 45, -26, 80, -19, 31, 7, 39, 13, 24, 12, 28, -64, 128, -17, 54, -11, 100, 62, -8, 51, -24, 54, -25, 40, 29, 6, 35, -28, 36, -53, -39, -52, -39, 0, -13, 12, -30, 29, -15, 28, 12, 14, 45, 40, 54, 41, 55, 11, 45, -19, 31, -31, 23, -64, 128, -11, 100, -10, 100, 12, -30, 28, 12, 14, 45, 10, -75, 9, -75, 11, -95, 0, -80, 24, -50, 39, -11, 0, -13, -63, -112, 12, -30, 14, 45, 41, 55, 11, 45, 10, -45, 10, -75, 11, -95, 49, 141, 7, 39, 12, 28, -10, 100, -5, 51, 62, -8, 14, 45, 11, 45, -31, 23, -31, 23, -64, 50, -38, 21, -50, -23, -37, 0, -38, 0, 40, 29, -28, 36, 0, 10, 0, 9, -42, 19, -25, -1, -18, -16, 0, -80, 39, -11, 0, -13, 12, -30, 14, 45, -50, -23, -38, 0, -90, 11, 40, 29, 0, 10, 0, 9, 0, 9, -25, -1, -18, -16, -53, -39, 0, -13, 14, 45, 40, 29, 0, 9, -18, -16, -53, -39, 14, 45, -31, 23, 40, 29, -18, -16, 39, -11, -53, -39, -31, 23, -38, 21, -37, 0, -50, -23, -82, -92, -108, -48, -75, -78, 10, -45, -14, -70, -7, -60, -230, -6, 28, 11, -31, 19, -5, 7, 54, -25, 28, 11, -5, 7, 54, -25, -5, 7, -5, 6, -31, -160, -14, -70, -230, -6, 0, -200, 62, -8, 54, -25, 54, -25, -5, 6, -95, 46, 54, -25, -95, 46, -37, 0, 54, -25, -37, 0, 10, -45, 54, -25, 10, -45, 11, -95, 0, -200, 54, -25, 11, -95, -93, -1, 0, -200, 11, -95, 62, -8, 0, -200, 3200, 0, -10, 100, 62, -8, 3200, 0, -283, -12, 30, 74, 48, 141, -64, 128, -10, 100, 3200, 0, 0, 204, 48, 141, 49, 141, 3200, 0, 0, 204, 49, 141, -64, 128, 3200, 0, 49, 141, 48, 141, 0, 204, -12, 7, 10, -45, -37, 0, -82, -92, 10, -45, -82, -92, -114, -125, -19, -50, -10, -26, -589, -6, -588, -5, -5, 5, -5, 192, 11, 55, 11, 45, 41, 55, -26, -70, -19, -50, -589, -6, -588, -5, -5, 192, 6, 270, 7, 270, 11, 55, 41, 55, -32, -110, -26, -70, -589, -6,
