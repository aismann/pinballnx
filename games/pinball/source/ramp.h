#ifndef RAMP_H_
#define RAMP_H_

#include<vector>
#include "cross2d/c2d.h"
#include "Box2D/Box2D.h"
#include "util.h"

using namespace std;

// The ramp class has a box2d body and fixture but they are only for detection purposes.
// The fixture in here is a box2d sensor and doesn't cause any forces. 
// The collision detection is handled in the Table class in the overriden
// BeginContact and EndContact methods from the b2ContactListener that Table extends.
// Creating a bidirectional ramp actually takes 2 Ramp objects, one for up and one for down
// because this class only transitions the pinball TO another layer. 
// This means you can also use this class to make holes that the ball can fall through but can't go up.
class Ramp {
    public:
        // C2DRenderer is only for debug graphics, can be removed if desired.
        // b2World is necessary for adding the sensor.
        // rampID specifies the collision shape to load.
        // layerID specifies the layer that the ramp transitions to.
        Ramp(C2DRenderer* renderer, b2World& world, int rampID, int layerID);
        b2Fixture* getFixture();
        int getLayerID();
    private:
        b2Fixture* m_fixture;
        int m_layerID;
        vector<float> m_launchTubeExitSensor = {1080.3, 555.2, 1078.3, 557.5, 1074.7, 563.0, 1071.1, 568.5, 1064.1, 575.6, 1057.0, 582.7, 1057.0, 585.2, 1057.0, 587.6, 1058.2, 588.8, 1059.4, 590.0, 1061.7, 590.0, 1064.0, 590.0, 1071.4, 582.6, 1078.8, 575.1, 1083.0, 569.0, 1087.1, 562.9, 1091.8, 565.6, 1096.5, 568.3, 1101.0, 570.8, 1105.5, 573.3, 1107.5, 574.4, 1109.5, 575.6, 1114.0, 578.4, 1118.5, 581.2, 1121.2, 583.1, 1123.9, 585.0, 1125.8, 585.0, 1127.6, 585.0, 1128.8, 583.8, 1130.0, 582.6, 1130.0, 580.4, 1130.0, 578.2, 1125.6, 574.6, 1121.1, 571.0, 1110.8, 564.8, 1100.5, 558.7, 1095.2, 555.9, 1090.0, 553.0, 1086.2, 553.0, 1082.3, 553.0, 1080.3, 555.2};
        vector<float> m_ramp1 = {921.7, 61.6, 921.2, 62.5, 920.5, 85.1, 919.7, 107.7, 920.8, 108.4, 921.8, 109.0, 945.7, 109.5, 969.6, 110.0, 974.1, 111.4, 978.5, 112.8, 985.9, 115.9, 993.2, 119.0, 1000.2, 122.7, 1007.2, 126.4, 1013.9, 132.5, 1020.5, 138.7, 1028.6, 145.8, 1036.7, 152.8, 1040.7, 157.4, 1044.8, 162.0, 1047.3, 162.0, 1049.8, 162.0, 1051.1, 160.3, 1052.5, 158.7, 1059.0, 154.3, 1065.5, 150.0, 1071.5, 145.7, 1077.5, 141.4, 1077.8, 138.0, 1078.1, 134.5, 1074.1, 129.0, 1070.1, 123.5, 1066.4, 118.2, 1062.7, 113.0, 1049.4, 101.5, 1037.5, 90.0, 1036.5, 90.0, 1035.5, 90.0, 1027.0, 84.4, 1018.5, 78.8, 1008.0, 73.5, 997.5, 68.3, 988.0, 66.2, 978.5, 64.1, 970.5, 63.1, 962.5, 62.1, 942.4, 61.4, 922.3, 60.8, 921.7, 61.6};
        vector<float> m_ramp1Down = {839.7, 60.6, 839.1, 61.6, 838.0, 84.4, 836.8, 107.2, 837.7, 108.1, 838.6, 109.0, 876.8, 108.8, 915.1, 108.5, 915.6, 85.3, 916.1, 62.2, 915.0, 61.5, 914.0, 60.9, 877.1, 60.3, 840.3, 59.7, 839.7, 60.6};
        vector<float> m_ramp2 = {986.7, 604.5, 972.8, 613.8, 962.2, 618.0, 951.5, 622.3, 944.7, 625.7, 938.0, 629.0, 927.2, 628.8, 916.5, 628.5, 916.2, 647.8, 916.0, 667.0, 917.4, 667.6, 918.9, 668.2, 933.7, 667.1, 948.5, 666.0, 962.5, 664.4, 976.5, 662.9, 996.1, 652.5, 1015.7, 642.2, 1024.3, 637.0, 1033.0, 631.8, 1030.3, 627.1, 1027.6, 623.5, 1018.7, 613.5, 1009.7, 603.5, 1005.2, 599.2, 1000.6, 595.0, 986.7, 604.5};
        vector<float> m_ramp2Down = {1026.5, 573.9, 1021.7, 580.7, 1014.7, 585.6, 1007.8, 590.5, 1006.7, 591.2, 1005.7, 591.8, 1017.1, 604.2, 1028.5, 616.5, 1032.4, 621.5, 1036.4, 626.5, 1037.1, 627.4, 1037.9, 628.3, 1042.2, 625.7, 1046.5, 623.2, 1057.3, 611.7, 1068.0, 600.2, 1068.0, 598.8, 1068.0, 597.5, 1059.2, 588.9, 1050.5, 580.3, 1045.1, 577.4, 1039.8, 574.6, 1035.5, 570.8, 1031.3, 567.1, 1026.5, 573.};
        vector<float> m_hole1 = {203.0, 72.0, 203.0, 91.0, 230.0, 91.0, 257.0, 91.0, 257.0, 72.0, 257.0, 53.0, 230.0, 53.0, 203.0, 53.0, 203.0, 72.0};
        vector<float> m_hole2 = {198.6, 580.8, 198.2, 581.5, 197.8, 601.0, 197.5, 620.5, 227.3, 620.8, 257.0, 621.0, 257.0, 600.5, 257.0, 580.0, 228.1, 580.0, 199.1, 580.0, 198.6, 580.8};
        vector<float> m_ramp3 = {734.0, 543.6, 714.0, 562.2, 714.0, 565.6, 714.0, 569.0, 724.8, 579.5, 735.5, 590.0, 738.8, 590.0, 742.1, 590.0, 745.0, 588.5, 748.0, 586.9, 748.0, 584.6, 748.0, 582.2, 749.6, 580.9, 751.2, 579.6, 753.0, 578.5, 754.9, 577.5, 764.5, 569.5, 774.2, 561.5, 777.5, 559.0, 780.8, 556.5, 782.5, 553.1, 784.1, 549.7, 779.3, 544.6, 774.5, 539.5, 767.5, 532.2, 760.6, 525.0, 757.3, 525.0, 754.0, 525.0, 734.0, 543.6};
        vector<float> m_ramp3Down = {708.5, 497.6, 702.5, 503.2, 695.5, 508.7, 688.5, 514.3, 684.8, 517.9, 681.0, 521.4, 681.0, 524.3, 681.0, 527.1, 694.6, 541.8, 708.3, 556.5, 711.5, 556.5, 714.8, 556.5, 731.9, 540.2, 749.0, 523.8, 749.0, 520.5, 749.0, 517.2, 735.6, 504.6, 722.2, 492.0, 718.4, 492.0, 714.5, 492.1, 708.5, 497.6};
        vector<float> m_ramp3up2 = {792.0, 564.7, 789.5, 565.2, 785.0, 569.4, 780.5, 573.7, 775.0, 577.7, 769.5, 581.7, 764.5, 586.8, 759.5, 591.9, 757.9, 592.0, 756.2, 592.0, 752.5, 596.1, 748.8, 600.3, 749.4, 607.4, 750.1, 614.5, 751.8, 616.2, 753.5, 617.9, 765.0, 618.5, 776.5, 619.2, 791.0, 616.5, 805.5, 613.9, 811.5, 610.6, 817.5, 607.4, 820.0, 605.9, 822.5, 604.5, 824.8, 602.6, 827.0, 600.7, 827.0, 597.6, 827.0, 594.5, 812.4, 579.2, 797.8, 564.0, 796.2, 564.1, 794.5, 564.3, 792.0, 564.7};
        // Access this vector by index of rampID to get the collision shape for that ramp
        vector<vector<float>> m_rampShapes = {
            m_launchTubeExitSensor, m_ramp1, m_ramp1Down, m_hole1, m_ramp2, m_ramp2Down, m_hole2, m_ramp3, m_ramp3Down, m_ramp3up2
        };
};

#endif